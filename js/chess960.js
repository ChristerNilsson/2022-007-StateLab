// Generated by CoffeeScript 2.5.1
var B, B0, B1, N, N0, N1, Q, X, chess960, fillIn, getEmpty;

[Q, N, B, X] = 'QNB_';

N0 = [0, 0, 0, 0, 1, 1, 1, 2, 2, 3];

N1 = [1, 2, 3, 4, 2, 3, 4, 3, 4, 4];

B0 = [0, 2, 4, 6];

B1 = [1, 3, 5, 7];

getEmpty = function(arr) {
  arr = _.map(arr, function(value, index) {
    if (value === X) {
      return index;
    } else {
      return X;
    }
  });
  return _.filter(arr, function(value) {
    return value !== X;
  });
};

fillIn = function(piece, places, pieces) {
  var empty, i, j, k, len, len1, place, ref, res;
  res = new Array(places.length + pieces.length);
  _.fill(res, X);
  for (j = 0, len = places.length; j < len; j++) {
    place = places[j];
    res[place] = piece;
  }
  empty = getEmpty(res);
  ref = _.range(pieces.length);
  for (k = 0, len1 = ref.length; k < len1; k++) {
    i = ref[k];
    res[empty[i]] = pieces[i];
  }
  return res;
};

chess960 = function(i) { // 16 microsecs
  var b0, b1, eight, five, n0, n1, q, six;
  q = Math.floor(i / 16) % 6;
  n0 = N0[Math.floor(i / 96) % 10];
  n1 = N1[Math.floor(i / 96) % 10];
  b0 = B0[Math.floor(i / 4) % 4];
  b1 = B1[i % 4];
  five = fillIn(N, [n0, n1], 'RKR');
  six = fillIn(Q, [q], five);
  eight = fillIn(B, [b0, b1], six);
  return eight.join('');
};

console.assert("RNBQKBNR" === chess960(518));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlc3M5NjAuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcY2hlc3M5NjAuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLENBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsUUFBQSxFQUFBLE1BQUEsRUFBQTs7QUFBQSxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxFQUFPLENBQVAsQ0FBQSxHQUFZOztBQUVaLEVBQUEsR0FBSyxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxFQUFPLENBQVAsRUFBUyxDQUFULEVBQVcsQ0FBWCxFQUFhLENBQWIsRUFBZSxDQUFmLEVBQWlCLENBQWpCLEVBQW1CLENBQW5COztBQUNMLEVBQUEsR0FBSyxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxFQUFPLENBQVAsRUFBUyxDQUFULEVBQVcsQ0FBWCxFQUFhLENBQWIsRUFBZSxDQUFmLEVBQWlCLENBQWpCLEVBQW1CLENBQW5COztBQUNMLEVBQUEsR0FBSyxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxFQUFPLENBQVA7O0FBQ0wsRUFBQSxHQUFLLENBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFMLEVBQU8sQ0FBUDs7QUFFTCxRQUFBLEdBQVcsUUFBQSxDQUFDLEdBQUQsQ0FBQTtFQUNWLEdBQUEsR0FBTSxDQUFDLENBQUMsR0FBRixDQUFNLEdBQU4sRUFBVyxRQUFBLENBQUMsS0FBRCxFQUFPLEtBQVAsQ0FBQTtJQUFpQixJQUFHLEtBQUEsS0FBTyxDQUFWO2FBQWlCLE1BQWpCO0tBQUEsTUFBQTthQUE0QixFQUE1Qjs7RUFBakIsQ0FBWDtTQUNOLENBQUMsQ0FBQyxNQUFGLENBQVMsR0FBVCxFQUFjLFFBQUEsQ0FBQyxLQUFELENBQUE7V0FBVyxLQUFBLEtBQVM7RUFBcEIsQ0FBZDtBQUZVOztBQUlYLE1BQUEsR0FBUyxRQUFBLENBQUMsS0FBRCxFQUFPLE1BQVAsRUFBYyxNQUFkLENBQUE7QUFDVCxNQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUE7RUFBQyxHQUFBLEdBQU0sSUFBSSxLQUFKLENBQVUsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsTUFBTSxDQUFDLE1BQWpDO0VBQ04sQ0FBQyxDQUFDLElBQUYsQ0FBTyxHQUFQLEVBQVcsQ0FBWDtFQUNBLEtBQUEsd0NBQUE7O0lBQ0MsR0FBRyxDQUFDLEtBQUQsQ0FBSCxHQUFhO0VBRGQ7RUFFQSxLQUFBLEdBQVEsUUFBQSxDQUFTLEdBQVQ7QUFDUjtFQUFBLEtBQUEsdUNBQUE7O0lBQ0MsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFELENBQU4sQ0FBSCxHQUFnQixNQUFNLENBQUMsQ0FBRDtFQUR2QjtTQUVBO0FBUlE7O0FBVVQsUUFBQSxHQUFXLFFBQUEsQ0FBQyxDQUFELENBQUEsRUFBQTtBQUVYLE1BQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBO0VBQUMsQ0FBQSxjQUFLLElBQUssR0FBTCxHQUFVO0VBQ2YsRUFBQSxHQUFLLEVBQUUsWUFBQyxJQUFLLEdBQUwsR0FBVSxFQUFYO0VBQ1AsRUFBQSxHQUFLLEVBQUUsWUFBQyxJQUFLLEdBQUwsR0FBVSxFQUFYO0VBQ1AsRUFBQSxHQUFLLEVBQUUsWUFBQyxJQUFLLEVBQUwsR0FBUyxDQUFWO0VBQ1AsRUFBQSxHQUFLLEVBQUUsQ0FBQyxDQUFBLEdBQUksQ0FBTDtFQUVQLElBQUEsR0FBUSxNQUFBLENBQU8sQ0FBUCxFQUFTLENBQUMsRUFBRCxFQUFJLEVBQUosQ0FBVCxFQUFpQixLQUFqQjtFQUNSLEdBQUEsR0FBUSxNQUFBLENBQU8sQ0FBUCxFQUFTLENBQUMsQ0FBRCxDQUFULEVBQWEsSUFBYjtFQUNSLEtBQUEsR0FBUSxNQUFBLENBQU8sQ0FBUCxFQUFTLENBQUMsRUFBRCxFQUFJLEVBQUosQ0FBVCxFQUFpQixHQUFqQjtTQUNSLEtBQUssQ0FBQyxJQUFOLENBQVcsRUFBWDtBQVhVOztBQWFYLE9BQU8sQ0FBQyxNQUFSLENBQWUsVUFBQSxLQUFjLFFBQUEsQ0FBUyxHQUFULENBQTdCIiwic291cmNlc0NvbnRlbnQiOlsiW1EsTixCLFhdID0gJ1FOQl8nXHJcblxyXG5OMCA9IFswLDAsMCwwLDEsMSwxLDIsMiwzXVxyXG5OMSA9IFsxLDIsMyw0LDIsMyw0LDMsNCw0XVxyXG5CMCA9IFswLDIsNCw2XVxyXG5CMSA9IFsxLDMsNSw3XVxyXG5cclxuZ2V0RW1wdHkgPSAoYXJyKSAtPlxyXG5cdGFyciA9IF8ubWFwIGFyciwgKHZhbHVlLGluZGV4KSAtPiBpZiB2YWx1ZT09WCB0aGVuIGluZGV4IGVsc2UgWFxyXG5cdF8uZmlsdGVyIGFyciwgKHZhbHVlKSAtPiB2YWx1ZSAhPSBYXHJcblxyXG5maWxsSW4gPSAocGllY2UscGxhY2VzLHBpZWNlcykgLT5cclxuXHRyZXMgPSBuZXcgQXJyYXkgcGxhY2VzLmxlbmd0aCArIHBpZWNlcy5sZW5ndGhcclxuXHRfLmZpbGwgcmVzLFhcclxuXHRmb3IgcGxhY2UgaW4gcGxhY2VzXHJcblx0XHRyZXNbcGxhY2VdID0gcGllY2VcclxuXHRlbXB0eSA9IGdldEVtcHR5IHJlc1xyXG5cdGZvciBpIGluIF8ucmFuZ2UgcGllY2VzLmxlbmd0aFxyXG5cdFx0cmVzW2VtcHR5W2ldXSA9IHBpZWNlc1tpXVxyXG5cdHJlc1xyXG5cclxuY2hlc3M5NjAgPSAoaSkgLT4gIyAxNiBtaWNyb3NlY3NcclxuXHJcblx0cSAgPSBpIC8vIDE2ICUgNlxyXG5cdG4wID0gTjBbaSAvLyA5NiAlIDEwXVxyXG5cdG4xID0gTjFbaSAvLyA5NiAlIDEwXVxyXG5cdGIwID0gQjBbaSAvLyA0ICUgNF1cclxuXHRiMSA9IEIxW2kgJSA0XVxyXG5cclxuXHRmaXZlICA9IGZpbGxJbiBOLFtuMCxuMV0sJ1JLUidcclxuXHRzaXggICA9IGZpbGxJbiBRLFtxXSxmaXZlXHJcblx0ZWlnaHQgPSBmaWxsSW4gQixbYjAsYjFdLHNpeFxyXG5cdGVpZ2h0LmpvaW4gJydcclxuXHJcbmNvbnNvbGUuYXNzZXJ0IFwiUk5CUUtCTlJcIiA9PSBjaGVzczk2MCA1MTgiXX0=
//# sourceURL=c:\github\2022-007-StateLab\coffee\chess960.coffee