// Generated by CoffeeScript 2.5.1
var prettyPair,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

export var globals = {};

globals.HOUR = 60 * 60 * 60; // tertier

globals.MINUTE = 60 * 60; // tertier

globals.SEC = 60; // tertier

globals.TOGGLE = 1; // 0=portrÃ¤tt (Android) 1=landskap (Mac)

globals.HEARTBEAT = 1000; // ms updates of localStorage

globals.FRAMERATE = 60; // 10

globals.states = {};

globals.settings = {};

globals.bits = {};

globals.backup = null;

globals.tw = 0;

globals.qr = null;

globals.sound = null;

globals.currState = null;

globals.diag = 0;

globals.os = '';

globals.chess = null;

export var clone = function(x) {
  return JSON.parse(JSON.stringify(x));
};

export var getLocalCoords = function() {
  var matrix, pd;
  matrix = drawingContext.getTransform();
  pd = pixelDensity();
  return matrix.inverse().transformPoint(new DOMPoint(mouseX * pd, mouseY * pd));
};

export var createState = function(key, klass) {
  return globals.states[key] = new klass(key);
};

export var pretty = function(tot) {
  var header, m, s, t;
  tot = Math.round(tot);
  t = modulo(tot, 60);
  tot = Math.floor(tot / 60);
  s = modulo(tot, 60);
  m = Math.floor(tot / 60);
  header = '';
  if (m > 0) {
    header += m + 'm';
  }
  if (s > 0) {
    header += s + 's';
  }
  if (t > 0) {
    header += t + 't';
  }
  return header;
};

assert('1m1t', pretty(3601));

assert('2s3t', pretty(123));

assert('60m30s', pretty(60 * 60 * 60 + 30 * 60));

prettyPair = function(a, b) {
  var separator;
  separator = pretty(b) !== '' ? ' + ' : '';
  return pretty(a) + separator + pretty(b);
};

assert('1m1t + 2s3t', prettyPair(3601, 123));

export var d2 = function(x) {
  x = Math.trunc(x);
  if (x < 10) {
    return '0' + x;
  } else {
    return x;
  }
};

assert('03', d2(3));

export var mst = function(x) { // tertier
  var m, s, t;
  t = modulo(x, 60);
  x = Math.floor(x / 60);
  s = modulo(x, 60);
  m = Math.floor(x / 60);
  return [m, s, t];
};

assert([3, 0, 0], mst(3 * 60 * 60));

assert([3, 0, 30], mst(180 * 60 + 30));

export var getOrange = function() {
  var g, gs, gsp;
  g = globals;
  gs = g.settings;
  gs.makeHandicap();
  gsp = gs.players;
  if (g.bits.handicap.nr === 0) {
    return '';
  } else {
    return prettyPair(gsp[0][0], gsp[0][1]);
  }
};

export var getWhite = function() {
  return globals.settings.compact();
};

export var getGreen = function() {
  var g, gs, gsp;
  g = globals;
  gs = g.settings;
  gs.makeHandicap();
  gsp = globals.settings.players;
  if (g.bits.handicap.nr === 0) {
    return '';
  } else {
    return prettyPair(gsp[1][0], gsp[1][1]);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFscy5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxnbG9iYWxzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxVQUFBO0VBQUE7O0FBQUEsT0FBQSxJQUFPLE9BQUEsR0FBVSxDQUFBOztBQUVqQixPQUFPLENBQUMsSUFBUixHQUFpQixFQUFBLEdBQUcsRUFBSCxHQUFNLEdBRnZCOztBQUdBLE9BQU8sQ0FBQyxNQUFSLEdBQWlCLEVBQUEsR0FBRyxHQUhwQjs7QUFJQSxPQUFPLENBQUMsR0FBUixHQUFpQixHQUpqQjs7QUFNQSxPQUFPLENBQUMsTUFBUixHQUFpQixFQU5qQjs7QUFPQSxPQUFPLENBQUMsU0FBUixHQUFvQixLQVBwQjs7QUFTQSxPQUFPLENBQUMsU0FBUixHQUFvQixHQVRwQjs7QUFVQSxPQUFPLENBQUMsTUFBUixHQUFpQixDQUFBOztBQUNqQixPQUFPLENBQUMsUUFBUixHQUFvQixDQUFBOztBQUNwQixPQUFPLENBQUMsSUFBUixHQUFlLENBQUE7O0FBQ2YsT0FBTyxDQUFDLE1BQVIsR0FBaUI7O0FBRWpCLE9BQU8sQ0FBQyxFQUFSLEdBQWE7O0FBQ2IsT0FBTyxDQUFDLEVBQVIsR0FBYTs7QUFDYixPQUFPLENBQUMsS0FBUixHQUFnQjs7QUFDaEIsT0FBTyxDQUFDLFNBQVIsR0FBb0I7O0FBQ3BCLE9BQU8sQ0FBQyxJQUFSLEdBQWU7O0FBQ2YsT0FBTyxDQUFDLEVBQVIsR0FBYTs7QUFDYixPQUFPLENBQUMsS0FBUixHQUFnQjs7QUFFaEIsT0FBQSxJQUFPLEtBQUEsR0FBUSxRQUFBLENBQUMsQ0FBRCxDQUFBO1NBQU8sSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFJLENBQUMsU0FBTCxDQUFlLENBQWYsQ0FBWDtBQUFQOztBQUVmLE9BQUEsSUFBTyxjQUFBLEdBQWlCLFFBQUEsQ0FBQSxDQUFBO0FBQ3hCLE1BQUEsTUFBQSxFQUFBO0VBQUMsTUFBQSxHQUFTLGNBQWMsQ0FBQyxZ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Q0FBQztFQUNQLEVBQUUsQ0FBQyxZQUFILENBQUE7RUFDQSxHQUFBLEdBQU0sRUFBRSxDQUFDO0VBQ1QsSUFBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFoQixLQUFzQixDQUF6QjtXQUFnQyxHQUFoQztHQUFBLE1BQUE7V0FBd0MsVUFBQSxDQUFXLEdBQUcsQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFELENBQWpCLEVBQXNCLEdBQUcsQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFELENBQTVCLEVBQXhDOztBQUxrQjs7QUFPbkIsT0FBQSxJQUFPLFFBQUEsR0FBVyxRQUFBLENBQUEsQ0FBQTtTQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBakIsQ0FBQTtBQUFIOztBQUVsQixPQUFBLElBQU8sUUFBQSxHQUFXLFFBQUEsQ0FBQSxDQUFBO0FBQ2xCLE1BQUEsQ0FBQSxFQUFBLEVBQUEsRUFBQTtFQUFDLENBQUEsR0FBSTtFQUNKLEVBQUEsR0FBSyxDQUFDLENBQUM7RUFDUCxFQUFFLENBQUMsWUFBSCxDQUFBO0VBQ0EsR0FBQSxHQUFNLE9BQU8sQ0FBQyxRQUFRLENBQUM7RUFDdkIsSUFBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFoQixLQUFzQixDQUF6QjtXQUFnQyxHQUFoQztHQUFBLE1BQUE7V0FBd0MsVUFBQSxDQUFXLEdBQUcsQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFELENBQWpCLEVBQXNCLEdBQUcsQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFELENBQTVCLEVBQXhDOztBQUxpQiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBnbG9iYWxzID0ge31cclxuXHJcbmdsb2JhbHMuSE9VUiAgID0gNjAqNjAqNjAgIyB0ZXJ0aWVyXHJcbmdsb2JhbHMuTUlOVVRFID0gNjAqNjAgICAgIyB0ZXJ0aWVyXHJcbmdsb2JhbHMuU0VDICAgID0gNjAgICAgICAgIyB0ZXJ0aWVyXHJcblxyXG5nbG9iYWxzLlRPR0dMRSA9IDEgIyAwPXBvcnRyw6R0dCAoQW5kcm9pZCkgMT1sYW5kc2thcCAoTWFjKVxyXG5nbG9iYWxzLkhFQVJUQkVBVCA9IDEwMDAgIyBtcyB1cGRhdGVzIG9mIGxvY2FsU3RvcmFnZVxyXG5cclxuZ2xvYmFscy5GUkFNRVJBVEUgPSA2MCAjIDEwXHJcbmdsb2JhbHMuc3RhdGVzID0ge31cclxuZ2xvYmFscy5zZXR0aW5ncyAgPSB7fVxyXG5nbG9iYWxzLmJpdHMgPSB7fVxyXG5nbG9iYWxzLmJhY2t1cCA9IG51bGxcclxuXHJcbmdsb2JhbHMudHcgPSAwXHJcbmdsb2JhbHMucXIgPSBudWxsXHJcbmdsb2JhbHMuc291bmQgPSBudWxsXHJcbmdsb2JhbHMuY3VyclN0YXRlID0gbnVsbFxyXG5nbG9iYWxzLmRpYWcgPSAwXHJcbmdsb2JhbHMub3MgPSAnJ1xyXG5nbG9iYWxzLmNoZXNzID0gbnVsbFxyXG5cclxuZXhwb3J0IGNsb25lID0gKHgpIC0+IEpTT04ucGFyc2UgSlNPTi5zdHJpbmdpZnkgeFxyXG5cclxuZXhwb3J0IGdldExvY2FsQ29vcmRzID0gLT5cclxuXHRtYXRyaXggPSBkcmF3aW5nQ29udGV4dC5nZXRUcmFuc2Zvcm0oKVxyXG5cdHBkID0gcGl4ZWxEZW5zaXR5KClcclxuXHRtYXRyaXguaW52ZXJzZSgpLnRyYW5zZm9ybVBvaW50IG5ldyBET01Qb2ludCBtb3VzZVggKiBwZCxtb3VzZVkgKiBwZFxyXG5cclxuZXhwb3J0IGNyZWF0ZVN0YXRlID0gKGtleSxrbGFzcykgLT4gZ2xvYmFscy5zdGF0ZXNba2V5XSA9IG5ldyBrbGFzcyBrZXlcclxuXHJcbmV4cG9ydCBwcmV0dHkgPSAodG90KSAtPlxyXG5cdHRvdCA9IE1hdGgucm91bmQgdG90XHJcblx0dCA9IHRvdCAlJSA2MFxyXG5cdHRvdCAvLz0gNjBcclxuXHRzID0gdG90ICUlIDYwXHJcblx0bSA9IHRvdCAvLyA2MFxyXG5cdGhlYWRlciA9ICcnXHJcblx0aWYgbSA+IDAgdGhlbiBoZWFkZXIgKz0gbSArICdtJ1xyXG5cdGlmIHMgPiAwIHRoZW4gaGVhZGVyICs9IHMgKyAncydcclxuXHRpZiB0ID4gMCB0aGVuIGhlYWRlciArPSB0ICsgJ3QnXHJcblx0aGVhZGVyXHJcbmFzc2VydCAnMW0xdCcsIHByZXR0eSAzNjAxXHJcbmFzc2VydCAnMnMzdCcsIHByZXR0eSAxMjNcclxuYXNzZXJ0ICc2MG0zMHMnLCBwcmV0dHkgNjAqNjAqNjArMzAqNjBcclxuXHJcbnByZXR0eVBhaXIgPSAoYSxiKSAtPiBcclxuXHRzZXBhcmF0b3IgPSBpZiBwcmV0dHkoYikgIT0gJycgdGhlbiAnICsgJyBlbHNlICcnXHJcblx0cHJldHR5KGEpICsgc2VwYXJhdG9yICsgcHJldHR5KGIpXHJcbmFzc2VydCAnMW0xdCArIDJzM3QnLCBwcmV0dHlQYWlyIDM2MDEsMTIzXHJcblxyXG5leHBvcnQgZDIgPSAoeCkgLT5cclxuXHR4ID0gTWF0aC50cnVuYyB4XHJcblx0aWYgeCA8IDEwIHRoZW4gJzAnK3ggZWxzZSB4XHJcbmFzc2VydCAnMDMnLCBkMiAzXHJcblxyXG5leHBvcnQgbXN0ID0gKHgpIC0+ICMgdGVydGllclxyXG5cdHQgPSB4ICUlIDYwXHJcblx0eCAvLz0gNjBcclxuXHRzID0geCAlJSA2MFxyXG5cdG0gPSB4IC8vIDYwXHJcblx0W20scyx0XSBcclxuYXNzZXJ0IFszLDAsMF0sIG1zdCAzKjYwKjYwXHJcbmFzc2VydCBbMywwLDMwXSwgbXN0IDE4MCo2MCszMFxyXG5cclxuZXhwb3J0IGdldE9yYW5nZSA9IC0+XHJcblx0ZyA9IGdsb2JhbHNcclxuXHRncyA9IGcuc2V0dGluZ3NcclxuXHRncy5tYWtlSGFuZGljYXAoKVxyXG5cdGdzcCA9IGdzLnBsYXllcnNcclxuXHRpZiBnLmJpdHMuaGFuZGljYXAubnIgPT0gMCB0aGVuICcnIGVsc2UgcHJldHR5UGFpciBnc3BbMF1bMF0sIGdzcFswXVsxXVxyXG5cclxuZXhwb3J0IGdldFdoaXRlID0gLT4gZ2xvYmFscy5zZXR0aW5ncy5jb21wYWN0KClcclxuXHJcbmV4cG9ydCBnZXRHcmVlbiA9IC0+IFxyXG5cdGcgPSBnbG9iYWxzXHJcblx0Z3MgPSBnLnNldHRpbmdzXHJcblx0Z3MubWFrZUhhbmRpY2FwKClcclxuXHRnc3AgPSBnbG9iYWxzLnNldHRpbmdzLnBsYXllcnNcclxuXHRpZiBnLmJpdHMuaGFuZGljYXAubnIgPT0gMCB0aGVuICcnIGVsc2UgcHJldHR5UGFpciBnc3BbMV1bMF0sIGdzcFsxXVsxXVxyXG4iXX0=
//# sourceURL=c:\github\2022-007-StateLab\coffee\globals.coffee